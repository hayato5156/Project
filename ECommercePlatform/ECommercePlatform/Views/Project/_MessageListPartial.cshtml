@using System

@model List<ECommercePlatform.Models.Messages>

<div class="row">
    @foreach (var m in Model)
    {
        <div class="col-md-6 mb-3">
            <div class="card shadow-sm border-primary">
                <div class="card-header bg-primary text-white">
                    <strong>@m.userName</strong> - 評分：@m.score
                </div>
                <div class="card-body">
                    <p class="card-text">@m.main</p>
        @if (m.imageData != null)
        {
            var base64 = Convert.ToBase64String(m.imageData);
            <img src="data:image/jpeg;base64,@base64" class="img-fluid rounded mt-2" />
        }
                </div>
                <div class="card-footer text-muted">
                    @m.date.ToString("yyyy-MM-dd HH:mm")
        @if (ViewBag.ID != null && (ViewBag.ID == m.userID || ViewBag.identity == "admin"))
        {
            <button class="btn btn-sm btn-danger float-end ms-1 delete-btn" data-id="@m.messageID">刪除</button>
        }
        @if (ViewBag.ID != null)
        {
            <button class="btn btn-sm btn-secondary float-end reply-btn" data-id="@m.messageID">回覆</button>
        }
    
                </div>
            </div>
        </div>
    }
</div>
