@model ECommercePlatform.Controllers.ReviewListViewModel

@{
    ViewData["Title"] = "商品評價";
}

<!-- 搜尋和篩選 -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h6 class="mb-0">🔍 搜尋與篩選</h6>
            </div>
            <div class="card-body">
                <form method="get" class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label">關鍵字搜尋</label>
                        <input type="text" name="keyword" value="@ViewBag.Keyword"
                               class="form-control" placeholder="搜尋評價內容或商品..." />
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">評分篩選</label>
                        <select name="scoreFilter" class="form-select">
                            <option value="">所有評分</option>
                            @{
                                var scoreFilter = ViewBag.ScoreFilter?.ToString();
                            }
                            @if (scoreFilter == "5")
                            {
                                <option value="5" selected>⭐⭐⭐⭐⭐ 5星</option>
                            }
                            else
                            {
                                <option value="5">⭐⭐⭐⭐⭐ 5星</option>
                            }
                            @if (scoreFilter == "4")
                            {
                                <option value="4" selected>⭐⭐⭐⭐☆ 4星</option>
                            }
                            else
                            {
                                <option value="4">⭐⭐⭐⭐☆ 4星</option>
                            }
                            @if (scoreFilter == "3")
                            {
                                <option value="3" selected>⭐⭐⭐☆☆ 3星</option>
                            }
                            else
                            {
                                <option value="3">⭐⭐⭐☆☆ 3星</option>
                            }
                            @if (scoreFilter == "2")
                            {
                                <option value="2" selected>⭐⭐☆☆☆ 2星</option>
                            }
                            else
                            {
                                <option value="2">⭐⭐☆☆☆ 2星</option>
                            }
                            @if (scoreFilter == "1")
                            {
                                <option value="1" selected>⭐☆☆☆☆ 1星</option>
                            }
                            else
                            {
                                <option value="1">⭐☆☆☆☆ 1星</option>
                            }
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">排序方式</label>
                        <select name="sort" class="form-select">
                            @{
                                var sortValue = ViewBag.Sort?.ToString() ?? "latest";
                            }
                            @if (sortValue == "latest")
                            {
                                <option value="latest" selected>最新優先</option>
                            }
                            else
                            {
                                <option value="latest">最新優先</option>
                            }
                            @if (sortValue == "oldest")
                            {
                                <option value="oldest" selected>最舊優先</option>
                            }
                            else
                            {
                                <option value="oldest">最舊優先</option>
                            }
                            @if (sortValue == "highscore")
                            {
                                <option value="highscore" selected>高分優先</option>
                            }
                            else
                            {
                                <option value="highscore">高分優先</option>
                            }
                            @if (sortValue == "lowscore")
                            {
                                <option value="lowscore" selected>低分優先</option>
                            }
                            else
                            {
                                <option value="lowscore">低分優先</option>
                            }
                        </select>
                    </div>
                    <div class="col-md-2 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary w-100">🔍 搜尋</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <h2 class="mb-4">📋 商品評價列表</h2>

    <div class="row mb-3">
        <div class="col-md-6">
            <p class="text-muted">
                📝 總留言數：<strong>@Model.TotalReviews</strong> |
                ⭐ 平均評分：<strong>@Model.AverageScore.ToString("0.0")</strong>
            </p>
        </div>
