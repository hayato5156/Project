
@{
    ViewData["Title"] = "ç•™è¨€ç‰ˆ";
    var messages = ViewBag.messages as List<ECommercePlatform.Models.Messages>;
}

<h2>ç•™è¨€åˆ—è¡¨</h2>
<p>
    ğŸ“ ç•™è¨€ç¸½æ•¸ï¼š@ViewBag.totalMessages |
    â­ å¹³å‡è©•åˆ†ï¼š@ViewBag.averageScore.ToString("0.0")
</p>

<form method="get" asp-controller="project" asp-action="Index">
    <input type="hidden" name="ID" value="@ViewBag.ID" />
    <input type="hidden" name="userName" value="@ViewBag.name" />
    <input type="hidden" name="buyOrSell" value="@ViewBag.identity" />

    <label>æ’åºæ–¹å¼ï¼š</label>
    <select name="sort">
        <option value="latest">æœ€æ–°ç•™è¨€</option>
        <option value="oldest">æœ€èˆŠç•™è¨€</option>
        <option value="highscore">è©•åˆ†æœ€é«˜</option>
        <option value="lowscore">è©•åˆ†æœ€ä½</option>
    </select>

    <label>é—œéµå­—æœå°‹ï¼š</label>
    <input type="text" name="keyword" placeholder="è¼¸å…¥é—œéµå­—" />

    <label>è©•åˆ†éæ¿¾ï¼š</label>
    <select name="scoreFilter">
        <option value="">--å…¨éƒ¨--</option>
        <option value="5">5 æ˜Ÿ</option>
        <option value="4">4 æ˜Ÿ</option>
        <option value="3">3 æ˜Ÿ</option>
        <option value="2">2 æ˜Ÿ</option>
        <option value="1">1 æ˜Ÿ</option>
    </select>

    <button type="submit">ç¯©é¸</button>
</form>

<div id="messageResult">
<div class="row">
    @foreach (var m in messages)
    {
        <div class="col-md-6 mb-3">
            <div class="card shadow-sm border-primary">
                <div class="card-header bg-primary text-white">
                    <strong>@m.userName</strong> - è©•åˆ†ï¼š@m.score
                </div>
                <div class="card-body">
                    <p class="card-text">@m.main</p>
                </div>
                <div class="card-footer text-muted">
                    @m.date.ToString("yyyy-MM-dd HH:mm")
                </div>
            </div>
        </div>
    }
</div>
</div>

<script src="/js/messages-filter.js"></script>
